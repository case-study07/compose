version: "3.9"
services:
  admin-frontend:
    container_name: admin-frontend
    # image: raityupiyo/cs-admin-frontend:latest
    build:
      context: admin_front/
      target: dev
    command: "yarn dev"
    ports:
      - 3100:3000
    volumes:
      - ./admin_front:/app
      - /app/node_modules

  end-frontend:
    container_name: end-frontend
    # image: raityupiyo/cs-end-frontend:latest
    build:
      context: end_front/
      target: dev
    command: "yarn dev"
    ports:
      - 3200:3000
    volumes:
      - ./end_front:/app
      - /app/node_modules

  admin-node:
    container_name: admin-node
    # image: cs-admin-backend:latest
    build:
      context: end_back/
    command: "yarn dev"
    ports:
      - 9100:9000
    volumes:
      - ./admin_back:/app
      - /app/node_modules

  end-node:
    container_name: end-node
    build:
      context: admin_back/
    # image: cs-end-backend:latest
    command: "yarn dev"
    ports:
      - 9200:9000
    volumes:
      - ./end_back:/app
      - /app/node_modules

  mysql:
    container_name: mysql
    image: mariadb:10.5
    ports:
      - 33060:3306
    volumes:
      - database:/var/lib/mysql
    env_file:
      - .database.env

  phpmyadmin:
    image: phpmyadmin:latest
    ports:
      - 8081:80
    env_file:
      - .database.env
volumes:
  database: